(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{85:function(e,t,n){},98:function(e,t,n){"use strict";n.r(t);var a,c,i,r,s,l=n(0),o=n.n(l),j=n(29),d=n.n(j),b=(n(85),n(22)),u=n(77),h=n(114),m=n(115),O=n(112),x=n(76),p=n(18),g=n(12),f=(n(86),n(116)),v=n(2),k=function(e){var t=e.profiles,n=e.title;return t.length?Object(v.jsxs)("div",{children:[Object(v.jsx)("h3",{className:"text-primary",children:n}),Object(v.jsx)("div",{className:"flex-row justify-space-between my-4",children:t&&t.map((function(e){return Object(v.jsx)("div",{className:"col-12 col-xl-6",children:Object(v.jsxs)("div",{className:"card mb-3",children:[Object(v.jsxs)("h4",{className:"card-header bg-dark text-light p-2 m-0",children:[e.name," ",Object(v.jsx)("br",{})]}),Object(v.jsx)(p.b,{className:"btn btn-block btn-squared btn-light text-dark",to:"/profiles/".concat(e._id),children:"View profile."})]})},e._id)}))})]}):Object(v.jsx)("h3",{children:"No Profiles Yet"})},w=n(33),y=n(113),N=Object(y.a)(a||(a=Object(w.a)(["\n  query allProfiles {\n    profiles {\n      _id\n      name\n      audits\n    }\n  }\n"]))),S=Object(y.a)(c||(c=Object(w.a)(["\n  query singleProfile($profileId: ID!) {\n    profile(profileId: $profileId) {\n      _id\n      name\n      audits\n    }\n  }\n"]))),I=Object(y.a)(i||(i=Object(w.a)(["\n  query me {\n    me {\n      _id\n      name\n      audits\n    }\n  }\n"]))),C=function(){var e=Object(f.a)(N),t=e.loading,n=e.data,a=(null===n||void 0===n?void 0:n.profiles)||[];return Object(v.jsx)("main",{children:Object(v.jsx)("div",{children:Object(v.jsx)("div",{children:t?Object(v.jsx)("div",{children:"Loading..."}):Object(v.jsx)(k,{profiles:a,title:"Here are current users:"})})})})},_=n(39),$=n.n(_),L=n(54),P=n(36),D=n(41),T=n(118),Y=Object(y.a)(r||(r=Object(w.a)(["\n  mutation addProfile($name: String!, $email: String!, $password: String!) {\n    addProfile(name: $name, email: $email, password: $password) {\n      token\n      profile {\n        _id\n        name\n      }\n    }\n  }\n"]))),A=Object(y.a)(s||(s=Object(w.a)(["\n  mutation login($email: String!, $password: String!) {\n    login(email: $email, password: $password) {\n      token\n      profile {\n        _id\n        name\n      }\n    }\n  }\n"]))),B=n(72),F=n(73),q=n(64),E=new(function(){function e(){Object(B.a)(this,e)}return Object(F.a)(e,[{key:"getProfile",value:function(){return Object(q.a)(this.getToken())}},{key:"loggedIn",value:function(){var e=this.getToken();return!(!e||this.isTokenExpired(e))}},{key:"isTokenExpired",value:function(e){return Object(q.a)(e).exp<Date.now()/1e3&&(localStorage.removeItem("id_token"),!0)}},{key:"getToken",value:function(){return localStorage.getItem("id_token")}},{key:"login",value:function(e){localStorage.setItem("id_token",e),window.location.assign("/")}},{key:"logout",value:function(){localStorage.removeItem("id_token"),window.location.reload()}}]),e}()),z=function(){var e=Object(l.useState)({name:"",email:"",password:""}),t=Object(D.a)(e,2),n=t[0],a=t[1],c=Object(T.a)(Y),i=Object(D.a)(c,2),r=i[0],s=i[1],o=s.error,j=s.data,d=function(e){var t=e.target,c=t.name,i=t.value;a(Object(b.a)(Object(b.a)({},n),{},Object(P.a)({},c,i)))},u=function(){var e=Object(L.a)($.a.mark((function e(t){var a,c;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),console.log(n),e.prev=2,e.next=5,r({variables:Object(b.a)({},n)});case 5:a=e.sent,c=a.data,E.login(c.addProfile.token),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(v.jsx)("main",{className:"flex-row justify-center mb-4",children:Object(v.jsx)("div",{className:"col-12 col-lg-10",children:Object(v.jsxs)("div",{className:"card",children:[Object(v.jsx)("h4",{className:"card-header bg-dark text-light p-2",children:"Sign Up"}),Object(v.jsxs)("div",{className:"card-body",children:[j?Object(v.jsxs)("p",{children:["Success! You may now head"," ",Object(v.jsx)(p.b,{to:"/",children:"back to the homepage."})]}):Object(v.jsxs)("form",{onSubmit:u,children:[Object(v.jsx)("input",{className:"form-input",placeholder:"Your username",name:"name",type:"text",value:n.name,onChange:d}),Object(v.jsx)("input",{className:"form-input",placeholder:"Your email",name:"email",type:"email",value:n.email,onChange:d}),Object(v.jsx)("input",{className:"form-input",placeholder:"******",name:"password",type:"password",value:n.password,onChange:d}),Object(v.jsx)("button",{className:"btn btn-block btn-info",style:{cursor:"pointer"},type:"submit",children:"Submit"})]}),o&&Object(v.jsx)("div",{className:"my-3 p-3 bg-danger text-white",children:o.message})]})]})})})},H=function(e){var t=Object(l.useState)({email:"",password:""}),n=Object(D.a)(t,2),a=n[0],c=n[1],i=Object(T.a)(A),r=Object(D.a)(i,2),s=r[0],o=r[1],j=o.error,d=o.data,u=function(e){var t=e.target,n=t.name,i=t.value;c(Object(b.a)(Object(b.a)({},a),{},Object(P.a)({},n,i)))},h=function(){var e=Object(L.a)($.a.mark((function e(t){var n,i;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),console.log(a),e.prev=2,e.next=5,s({variables:Object(b.a)({},a)});case 5:n=e.sent,i=n.data,E.login(i.login.token),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.error(e.t0);case 13:c({email:"",password:""});case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(v.jsx)("main",{className:"flex-row justify-center mb-4",children:Object(v.jsx)("div",{className:"col-12 col-lg-10",children:Object(v.jsxs)("div",{className:"card",children:[Object(v.jsx)("h4",{className:"card-header bg-dark text-light p-2",children:"Login"}),Object(v.jsxs)("div",{className:"card-body",children:[d?Object(v.jsxs)("p",{children:["Success! You may now head"," ",Object(v.jsx)(p.b,{to:"/",children:"back to the homepage."})]}):Object(v.jsxs)("form",{onSubmit:h,children:[Object(v.jsx)("input",{className:"form-input",placeholder:"Your email",name:"email",type:"email",value:a.email,onChange:u}),Object(v.jsx)("input",{className:"form-input",placeholder:"******",name:"password",type:"password",value:a.password,onChange:u}),Object(v.jsx)("button",{className:"btn btn-block btn-info",style:{cursor:"pointer"},type:"submit",children:"Submit"})]}),j&&Object(v.jsx)("div",{className:"my-3 p-3 bg-danger text-white",children:j.message})]})]})})})},M=function(){return Object(v.jsx)("header",{className:"bg-info text-dark mb-4 py-3 display-flex align-center",children:Object(v.jsxs)("div",{className:"container flex-column justify-space-between-lg justify-center align-center text-center",children:[Object(v.jsx)(p.b,{className:"text-dark",to:"/",children:Object(v.jsx)("h1",{className:"m-0",style:{fontSize:"3rem"},children:"ARCCOM"})}),Object(v.jsx)("p",{className:"m-0",style:{fontSize:"1.75rem",fontWeight:"700"},children:"Supporting the fight."}),Object(v.jsx)("div",{children:E.loggedIn()?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(p.b,{className:"btn btn-lg btn-primary m-2",to:"/me",children:"View My Profile"}),Object(v.jsx)("button",{className:"btn btn-lg btn-light m-2",onClick:function(e){e.preventDefault(),E.logout()},children:"Logout"})]}):Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(p.b,{className:"btn btn-lg btn-primary m-2",to:"/login",children:"Login"}),Object(v.jsx)(p.b,{className:"btn btn-lg btn-light m-2",to:"/signup",children:"Signup"})]})})]})})},U=function(){var e=Object(g.g)(),t=Object(g.f)();return Object(v.jsx)("footer",{className:"w-100 mt-auto text-dark p-4",children:Object(v.jsx)("div",{className:"container text-center mb-5",children:"/"!==e.pathname&&Object(v.jsx)("button",{className:"btn btn-dark mb-3",onClick:function(){return t.goBack()},children:"\u2190 Go Back"})})})},J=function(){var e=Object(g.h)().profileId,t=Object(f.a)(e?S:I,{variables:{profileId:e}}),n=t.loading,a=t.data,c=(null===a||void 0===a?void 0:a.me)||(null===a||void 0===a?void 0:a.profile)||{};return E.loggedIn()&&E.getProfile().data._id===e?Object(v.jsx)(g.a,{to:"/me"}):n?Object(v.jsx)("div",{children:"Loading..."}):(null===c||void 0===c?void 0:c.name)?Object(v.jsx)("div",{children:Object(v.jsxs)("h2",{className:"card-header",children:["".concat(c.name)," has completed the below audits:"]})}):Object(v.jsx)("h4",{children:"You need to be logged in to see your profile page. Use the navigation links above to sign up or log in!"})},R=function(){return Object(v.jsx)("h1",{children:"Hello Audits"})},V=n(48),G=n(75),W=n(34),K=n(49),Q=function(){return Object(v.jsx)(V.a,{bg:"light",expand:"lg",children:Object(v.jsxs)(G.a,{fluid:!0,children:[Object(v.jsx)(V.a.Brand,{href:"/",children:"ARCHSE"}),Object(v.jsx)(V.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(v.jsx)(V.a.Collapse,{id:"basic-navbar-nav",children:Object(v.jsxs)(K.a,{className:"me-auto",children:[Object(v.jsx)(K.a.Link,{href:"/login",children:"Login"}),Object(v.jsx)(K.a.Link,{href:"/signup",children:"Sign Up"}),Object(v.jsx)(K.a.Link,{href:"/audits",children:"Audits"}),Object(v.jsxs)(W.a,{title:"Dropdown",id:"basic-nav-dropdown",children:[Object(v.jsx)(W.a.Item,{href:"#action/3.1",children:"Action"}),Object(v.jsx)(W.a.Item,{href:"#action/3.2",children:"Another action"}),Object(v.jsx)(W.a.Item,{href:"#action/3.3",children:"Something"}),Object(v.jsx)(W.a.Divider,{}),Object(v.jsx)(W.a.Item,{href:"#action/3.4",children:"Separated link"})]})]})})]})})},X=Object(u.a)({uri:"/graphql"}),Z=Object(x.a)((function(e,t){var n=t.headers,a=localStorage.getItem("id_token");return{headers:Object(b.a)(Object(b.a)({},n),{},{authorization:a?"Bearer ".concat(a):""})}})),ee=new h.a({link:Z.concat(X),cache:new m.a});var te=function(){return Object(v.jsx)(O.a,{client:ee,children:Object(v.jsx)(p.a,{children:Object(v.jsxs)("div",{className:"flex-column justify-flex-start min-100-vh",children:[Object(v.jsx)(M,{}),Object(v.jsx)(Q,{}),Object(v.jsxs)("div",{className:"container",children:[Object(v.jsx)(g.b,{exact:!0,path:"/",children:Object(v.jsx)(C,{})}),Object(v.jsx)(g.b,{exact:!0,path:"/login",children:Object(v.jsx)(H,{})}),Object(v.jsx)(g.b,{exact:!0,path:"/signup",children:Object(v.jsx)(z,{})}),Object(v.jsx)(g.b,{exact:!0,path:"/me",children:Object(v.jsx)(J,{})}),Object(v.jsx)(g.b,{exact:!0,path:"/audits",children:Object(v.jsx)(R,{})}),Object(v.jsx)(g.b,{exact:!0,path:"/profiles/:profileId",children:Object(v.jsx)(J,{})})]}),Object(v.jsx)(U,{})]})})})},ne=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,119)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,i=t.getLCP,r=t.getTTFB;n(e),a(e),c(e),i(e),r(e)}))};d.a.render(Object(v.jsx)(o.a.StrictMode,{children:Object(v.jsx)(te,{})}),document.getElementById("root")),ne()}},[[98,1,2]]]);
//# sourceMappingURL=main.3d54ea0c.chunk.js.map